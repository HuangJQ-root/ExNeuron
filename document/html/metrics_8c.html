<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ExNeuron: metrics.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ExNeuron
   &#160;<span id="projectnumber">2.12</span>
   </div>
   <div id="projectbrief">this is a document for ExNeuron</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0af1587c8378955de40f48b4bd1869f0.html">base</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">metrics.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;sys/statvfs.h&gt;</code><br />
<code>#include &lt;sys/sysinfo.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;gnu/libc-version.h&gt;</code><br />
<code>#include &quot;<a class="el" href="adapter_8h_source.html">adapter.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="adapter__internal_8h_source.html">adapter/adapter_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="metrics_8h_source.html">metrics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log_8h_source.html">utils/log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="time_8h_source.html">utils/time.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for metrics.c:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c__incl.png" border="0" usemap="#ametrics_8c" alt=""/></div>
<map name="ametrics_8c" id="ametrics_8c">
<area shape="rect" title=" " alt="" coords="1702,5,1785,32"/>
<area shape="rect" title=" " alt="" coords="158,80,230,107"/>
<area shape="rect" title=" " alt="" coords="112,841,196,868"/>
<area shape="rect" title=" " alt="" coords="1832,80,1937,107"/>
<area shape="rect" title=" " alt="" coords="1962,80,2069,107"/>
<area shape="rect" title=" " alt="" coords="2093,80,2167,107"/>
<area shape="rect" title=" " alt="" coords="2192,80,2329,107"/>
<area shape="rect" href="adapter_8h.html" title=" " alt="" coords="1086,543,1169,569"/>
<area shape="rect" href="metrics_8h.html" title=" " alt="" coords="459,767,542,793"/>
<area shape="rect" href="adapter__internal_8h.html" title=" " alt="" coords="1125,80,1319,107"/>
<area shape="rect" href="log_8h.html" title=" " alt="" coords="1416,304,1503,331"/>
<area shape="rect" href="time_8h.html" title=" " alt="" coords="1697,916,1793,943"/>
<area shape="rect" title=" " alt="" coords="1224,991,1295,1017"/>
<area shape="rect" title=" " alt="" coords="660,617,736,644"/>
<area shape="rect" href="define_8h.html" title=" " alt="" coords="1139,841,1214,868"/>
<area shape="rect" href="msg_8h.html" title=" " alt="" coords="920,617,983,644"/>
<area shape="rect" title=" " alt="" coords="758,916,841,943"/>
<area shape="rect" href="type_8h.html" title=" " alt="" coords="1001,841,1064,868"/>
<area shape="rect" href="rolling__counter_8h.html" title=" " alt="" coords="419,841,582,868"/>
<area shape="rect" href="utextend_8h.html" title=" " alt="" coords="220,841,344,868"/>
<area shape="rect" href="uthash_8h.html" title=" " alt="" coords="108,916,187,943"/>
<area shape="rect" title=" " alt="" coords="481,991,555,1017"/>
<area shape="rect" title=" " alt="" coords="1017,916,1113,943"/>
<area shape="rect" title=" " alt="" coords="1402,916,1469,943"/>
<area shape="rect" title=" " alt="" coords="141,991,212,1017"/>
<area shape="rect" title=" " alt="" coords="1137,916,1221,943"/>
<area shape="rect" title=" " alt="" coords="265,991,336,1017"/>
<area shape="rect" href="utarray_8h.html" title=" " alt="" coords="5,916,84,943"/>
<area shape="rect" href="utlist_8h.html" title=" " alt="" coords="414,916,481,943"/>
<area shape="rect" title=" " alt="" coords="10,991,85,1017"/>
<area shape="rect" href="neu__json__rw_8h.html" title=" " alt="" coords="660,692,805,719"/>
<area shape="rect" href="tag_8h.html" title=" " alt="" coords="815,767,869,793"/>
<area shape="rect" href="errcodes_8h.html" title=" " alt="" coords="1227,767,1318,793"/>
<area shape="rect" title=" " alt="" coords="881,692,949,719"/>
<area shape="rect" href="json_8h.html" title=" " alt="" coords="708,841,800,868"/>
<area shape="rect" href="event_8h.html" title=" " alt="" coords="1630,543,1742,569"/>
<area shape="rect" href="plugin_8h.html" title=" " alt="" coords="1277,461,1351,487"/>
<area shape="rect" href="adapter__info_8h.html" title=" " alt="" coords="1164,379,1280,405"/>
<area shape="rect" href="manager_8h.html" title=" " alt="" coords="918,155,1041,181"/>
<area shape="rect" href="msg__q_8h.html" title=" " alt="" coords="678,461,755,487"/>
<area shape="rect" href="zlog_8h.html" title=" " alt="" coords="1446,543,1539,569"/>
<area shape="rect" title=" " alt="" coords="1446,617,1521,644"/>
<area shape="rect" href="persist_8h.html" title=" " alt="" coords="833,304,960,331"/>
<area shape="rect" href="manager__internal_8h.html" title=" " alt="" coords="938,229,1087,256"/>
<area shape="rect" title=" " alt="" coords="881,379,960,405"/>
<area shape="rect" href="persist__json__plugin_8h.html" title=" " alt="" coords="508,453,653,495"/>
<area shape="rect" href="msg__internal_8h.html" title=" " alt="" coords="659,543,814,569"/>
<area shape="rect" title=" " alt="" coords="1457,379,1544,405"/>
<area shape="rect" title=" " alt="" coords="1568,379,1655,405"/>
<area shape="rect" title=" " alt="" coords="1699,991,1790,1017"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a85c7f967bf06b5296bb6847078c4e141"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a85c7f967bf06b5296bb6847078c4e141">find_os_info</a> ()</td></tr>
<tr class="memdesc:a85c7f967bf06b5296bb6847078c4e141"><td class="mdescLeft">&#160;</td><td class="mdescRight">查找并填充操作系统的相关信息到全局度量结构体中。  <a href="metrics_8c.html#a85c7f967bf06b5296bb6847078c4e141">More...</a><br /></td></tr>
<tr class="separator:a85c7f967bf06b5296bb6847078c4e141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0c07b91859d028e459b964fdd8f13e"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e">parse_memory_fields</a> (int col)</td></tr>
<tr class="memdesc:a1c0c07b91859d028e459b964fdd8f13e"><td class="mdescLeft">&#160;</td><td class="mdescRight">解析并返回指定列的内存信息（以字节为单位）。  <a href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e">More...</a><br /></td></tr>
<tr class="separator:a1c0c07b91859d028e459b964fdd8f13e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ded23fbb5452e9519b762b8af7f500"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#ac8ded23fbb5452e9519b762b8af7f500">memory_total</a> ()</td></tr>
<tr class="separator:ac8ded23fbb5452e9519b762b8af7f500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116157a1c040934a25d948905e22a174"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a116157a1c040934a25d948905e22a174">memory_used</a> ()</td></tr>
<tr class="separator:a116157a1c040934a25d948905e22a174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a299a5846c32a932b30ac9d8d840285c0"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a299a5846c32a932b30ac9d8d840285c0">neuron_memory_used</a> ()</td></tr>
<tr class="separator:a299a5846c32a932b30ac9d8d840285c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a059d31a7f36e85487e99052a8b2bec34"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a059d31a7f36e85487e99052a8b2bec34">memory_cache</a> ()</td></tr>
<tr class="separator:a059d31a7f36e85487e99052a8b2bec34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd8ce4f99ee60dc46c91cf3d44269fb7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#afd8ce4f99ee60dc46c91cf3d44269fb7">disk_usage</a> (size_t *size_p, size_t *used_p, size_t *avail_p)</td></tr>
<tr class="separator:afd8ce4f99ee60dc46c91cf3d44269fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51796c6ddd8172def2fee4de30f572d"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#ad51796c6ddd8172def2fee4de30f572d">cpu_usage</a> ()</td></tr>
<tr class="separator:ad51796c6ddd8172def2fee4de30f572d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a143b570f78c1dbd05dc38a1cc25674"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a9a143b570f78c1dbd05dc38a1cc25674">has_core_dump_in_dir</a> (const char *dir, const char *prefix)</td></tr>
<tr class="separator:a9a143b570f78c1dbd05dc38a1cc25674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b409720ca506204f9f20a9f59810f1a"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a4b409720ca506204f9f20a9f59810f1a">get_core_dir</a> (const char *core_pattern)</td></tr>
<tr class="separator:a4b409720ca506204f9f20a9f59810f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53393c854671925690d6fe4d89acad80"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a53393c854671925690d6fe4d89acad80">has_core_dumps</a> ()</td></tr>
<tr class="separator:a53393c854671925690d6fe4d89acad80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c540b36a3c5c2bf45c461f101da5b65"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a0c540b36a3c5c2bf45c461f101da5b65">metrics_unregister_entry</a> (const char *name)</td></tr>
<tr class="separator:a0c540b36a3c5c2bf45c461f101da5b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcf9c20994247a75a0e325bc9a028ac2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#adcf9c20994247a75a0e325bc9a028ac2">neu_metric_entries_add</a> (<a class="el" href="structneu__metric__entry__t.html">neu_metric_entry_t</a> **entries, const char *name, const char *help, <a class="el" href="metrics_8h.html#af02d32b6106f4771a8ade0c0fe3a2fc6">neu_metric_type_e</a> type, uint64_t init)</td></tr>
<tr class="memdesc:adcf9c20994247a75a0e325bc9a028ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">向度量项列表中添加一个新的度量项。  <a href="metrics_8c.html#adcf9c20994247a75a0e325bc9a028ac2">More...</a><br /></td></tr>
<tr class="separator:adcf9c20994247a75a0e325bc9a028ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c020752c4c581373d5496be25323913"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a4c020752c4c581373d5496be25323913">neu_metrics_init</a> ()</td></tr>
<tr class="memdesc:a4c020752c4c581373d5496be25323913"><td class="mdescLeft">&#160;</td><td class="mdescRight">初始化度量指标。  <a href="metrics_8c.html#a4c020752c4c581373d5496be25323913">More...</a><br /></td></tr>
<tr class="separator:a4c020752c4c581373d5496be25323913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323426323d6d97309beebbb1bb1d6b56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a323426323d6d97309beebbb1bb1d6b56">neu_metrics_add_node</a> (const <a class="el" href="define_8h.html#a6fc06a17a84fda2b3f03dae071c32f32">neu_adapter_t</a> *adapter)</td></tr>
<tr class="memdesc:a323426323d6d97309beebbb1bb1d6b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">添加一个节点度量到全局度量集合中。  <a href="metrics_8c.html#a323426323d6d97309beebbb1bb1d6b56">More...</a><br /></td></tr>
<tr class="separator:a323426323d6d97309beebbb1bb1d6b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3257ba6ef24aa42bb32e7b46a292fa60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a3257ba6ef24aa42bb32e7b46a292fa60">neu_metrics_del_node</a> (const <a class="el" href="define_8h.html#a6fc06a17a84fda2b3f03dae071c32f32">neu_adapter_t</a> *adapter)</td></tr>
<tr class="separator:a3257ba6ef24aa42bb32e7b46a292fa60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad747eaf22f78ec7829e8b02258ab47aa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#ad747eaf22f78ec7829e8b02258ab47aa">neu_metrics_register_entry</a> (const char *name, const char *help, <a class="el" href="metrics_8h.html#af02d32b6106f4771a8ade0c0fe3a2fc6">neu_metric_type_e</a> type)</td></tr>
<tr class="memdesc:ad747eaf22f78ec7829e8b02258ab47aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">注册一个新的度量项。  <a href="metrics_8c.html#ad747eaf22f78ec7829e8b02258ab47aa">More...</a><br /></td></tr>
<tr class="separator:ad747eaf22f78ec7829e8b02258ab47aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1df8cd187485739c3e3749919b5e1c44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a1df8cd187485739c3e3749919b5e1c44">neu_metrics_unregister_entry</a> (const char *name)</td></tr>
<tr class="separator:a1df8cd187485739c3e3749919b5e1c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37844554c13adda3a08677c12fe54247"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a37844554c13adda3a08677c12fe54247">neu_metrics_visist</a> (<a class="el" href="metrics_8h.html#a1a62084e12635a3ec0a01c677cc31d8c">neu_metrics_cb_t</a> cb, void *data)</td></tr>
<tr class="separator:a37844554c13adda3a08677c12fe54247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2763ed60fd2ba11688794cc023b310"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structneu__metrics__t.html">neu_metrics_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a2c2763ed60fd2ba11688794cc023b310">neu_get_global_metrics</a> ()</td></tr>
<tr class="separator:a2c2763ed60fd2ba11688794cc023b310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a962b2176b4975ae931cd702e2cbe90d1"><td class="memItemLeft" align="right" valign="top">pthread_rwlock_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#a962b2176b4975ae931cd702e2cbe90d1">g_metrics_mtx_</a> = PTHREAD_RWLOCK_INITIALIZER</td></tr>
<tr class="memdesc:a962b2176b4975ae931cd702e2cbe90d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">全局读写锁，用于保护度量集合的并发访问。  <a href="metrics_8c.html#a962b2176b4975ae931cd702e2cbe90d1">More...</a><br /></td></tr>
<tr class="separator:a962b2176b4975ae931cd702e2cbe90d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4412e5042f07177238726097fcde78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structneu__metrics__t.html">neu_metrics_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#afc4412e5042f07177238726097fcde78">g_metrics_</a></td></tr>
<tr class="memdesc:afc4412e5042f07177238726097fcde78"><td class="mdescLeft">&#160;</td><td class="mdescRight">全局度量对象，用于存储和管理所有适配器和节点的度量信息。  <a href="metrics_8c.html#afc4412e5042f07177238726097fcde78">More...</a><br /></td></tr>
<tr class="separator:afc4412e5042f07177238726097fcde78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa831bfee9fef2d4d352f10e84304f67f"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metrics_8c.html#aa831bfee9fef2d4d352f10e84304f67f">g_start_ts_</a></td></tr>
<tr class="memdesc:aa831bfee9fef2d4d352f10e84304f67f"><td class="mdescLeft">&#160;</td><td class="mdescRight">全局起始时间戳，记录程序或特定操作的开始时间。  <a href="metrics_8c.html#aa831bfee9fef2d4d352f10e84304f67f">More...</a><br /></td></tr>
<tr class="separator:aa831bfee9fef2d4d352f10e84304f67f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad51796c6ddd8172def2fee4de30f572d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad51796c6ddd8172def2fee4de30f572d">&#9670;&nbsp;</a></span>cpu_usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned cpu_usage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afd8ce4f99ee60dc46c91cf3d44269fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd8ce4f99ee60dc46c91cf3d44269fb7">&#9670;&nbsp;</a></span>disk_usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int disk_usage </td>
          <td>(</td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>used_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>avail_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a85c7f967bf06b5296bb6847078c4e141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85c7f967bf06b5296bb6847078c4e141">&#9670;&nbsp;</a></span>find_os_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void find_os_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>查找并填充操作系统的相关信息到全局度量结构体中。 </p>
<p>此函数执行一系列命令来获取操作系统发行版名称、内核版本和机器类型，并将这些信息 存储到全局度量结构体 <code>g_metrics_</code> 中。如果在执行过程中遇到任何错误（例如命 令执行失败或无输出），则会记录错误日志并返回。 </p>

</div>
</div>
<a id="a4b409720ca506204f9f20a9f59810f1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b409720ca506204f9f20a9f59810f1a">&#9670;&nbsp;</a></span>get_core_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* get_core_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>core_pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a143b570f78c1dbd05dc38a1cc25674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a143b570f78c1dbd05dc38a1cc25674">&#9670;&nbsp;</a></span>has_core_dump_in_dir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool has_core_dump_in_dir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a53393c854671925690d6fe4d89acad80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53393c854671925690d6fe4d89acad80">&#9670;&nbsp;</a></span>has_core_dumps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool has_core_dumps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a53393c854671925690d6fe4d89acad80_cgraph.png" border="0" usemap="#ametrics_8c_a53393c854671925690d6fe4d89acad80_cgraph" alt=""/></div>
<map name="ametrics_8c_a53393c854671925690d6fe4d89acad80_cgraph" id="ametrics_8c_a53393c854671925690d6fe4d89acad80_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,136,57"/>
<area shape="rect" href="metrics_8c.html#a4b409720ca506204f9f20a9f59810f1a" title=" " alt="" coords="216,5,319,32"/>
<area shape="rect" href="metrics_8c.html#a9a143b570f78c1dbd05dc38a1cc25674" title=" " alt="" coords="184,56,351,83"/>
</map>
</div>

</div>
</div>
<a id="a059d31a7f36e85487e99052a8b2bec34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a059d31a7f36e85487e99052a8b2bec34">&#9670;&nbsp;</a></span>memory_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t memory_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a059d31a7f36e85487e99052a8b2bec34_cgraph.png" border="0" usemap="#ametrics_8c_a059d31a7f36e85487e99052a8b2bec34_cgraph" alt=""/></div>
<map name="ametrics_8c_a059d31a7f36e85487e99052a8b2bec34_cgraph" id="ametrics_8c_a059d31a7f36e85487e99052a8b2bec34_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,128,32"/>
<area shape="rect" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e" title="解析并返回指定列的内存信息（以字节为单位）。" alt="" coords="176,5,339,32"/>
</map>
</div>

</div>
</div>
<a id="ac8ded23fbb5452e9519b762b8af7f500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ded23fbb5452e9519b762b8af7f500">&#9670;&nbsp;</a></span>memory_total()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t memory_total </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_ac8ded23fbb5452e9519b762b8af7f500_cgraph.png" border="0" usemap="#ametrics_8c_ac8ded23fbb5452e9519b762b8af7f500_cgraph" alt=""/></div>
<map name="ametrics_8c_ac8ded23fbb5452e9519b762b8af7f500_cgraph" id="ametrics_8c_ac8ded23fbb5452e9519b762b8af7f500_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,120,32"/>
<area shape="rect" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e" title="解析并返回指定列的内存信息（以字节为单位）。" alt="" coords="168,5,331,32"/>
</map>
</div>

</div>
</div>
<a id="a116157a1c040934a25d948905e22a174"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a116157a1c040934a25d948905e22a174">&#9670;&nbsp;</a></span>memory_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t memory_used </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a116157a1c040934a25d948905e22a174_cgraph.png" border="0" usemap="#ametrics_8c_a116157a1c040934a25d948905e22a174_cgraph" alt=""/></div>
<map name="ametrics_8c_a116157a1c040934a25d948905e22a174_cgraph" id="ametrics_8c_a116157a1c040934a25d948905e22a174_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,120,32"/>
<area shape="rect" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e" title="解析并返回指定列的内存信息（以字节为单位）。" alt="" coords="168,5,331,32"/>
</map>
</div>

</div>
</div>
<a id="a0c540b36a3c5c2bf45c461f101da5b65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c540b36a3c5c2bf45c461f101da5b65">&#9670;&nbsp;</a></span>metrics_unregister_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void metrics_unregister_entry </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a0c540b36a3c5c2bf45c461f101da5b65_cgraph.png" border="0" usemap="#ametrics_8c_a0c540b36a3c5c2bf45c461f101da5b65_cgraph" alt=""/></div>
<map name="ametrics_8c_a0c540b36a3c5c2bf45c461f101da5b65_cgraph" id="ametrics_8c_a0c540b36a3c5c2bf45c461f101da5b65_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,149,76"/>
<area shape="rect" href="metrics_8h.html#ae8a16be19a1963e118da7e68d13dfce3" title=" " alt="" coords="197,42,367,69"/>
<area shape="rect" href="metrics_8h.html#a8c32e9cb6e10201d020fdda7c24e63ce" title=" " alt="" coords="431,5,581,47"/>
<area shape="rect" href="rolling__counter_8h.html#a2adea9d49fb3e851d1b2461c5cb4a8dc" title=" " alt="" coords="415,71,597,98"/>
</map>
</div>

</div>
</div>
<a id="a2c2763ed60fd2ba11688794cc023b310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2763ed60fd2ba11688794cc023b310">&#9670;&nbsp;</a></span>neu_get_global_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structneu__metrics__t.html">neu_metrics_t</a>* neu_get_global_metrics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adcf9c20994247a75a0e325bc9a028ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf9c20994247a75a0e325bc9a028ac2">&#9670;&nbsp;</a></span>neu_metric_entries_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int neu_metric_entries_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structneu__metric__entry__t.html">neu_metric_entry_t</a> **&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>help</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="metrics_8h.html#af02d32b6106f4771a8ade0c0fe3a2fc6">neu_metric_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>init</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>向度量项列表中添加一个新的度量项。 </p>
<p>此函数用于向指定的度量项列表中添加一个新的度量项。如果度量项已存在，则检查其类型和帮助信息是否匹配，若不匹配则记录错误并返回 -1。 如果需要并且初始化值大于 0，则会为滚动计数器类型的度量项分配新的滚动计数器实例。 在操作过程中可能会分配内存，如果内存分配失败，则返回 -1。</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entries</td><td>指向度量项列表指针的指针。 </td></tr>
    <tr><td class="paramname">name</td><td>度量项的名称。 </td></tr>
    <tr><td class="paramname">help</td><td>度量项的帮助信息或描述。 </td></tr>
    <tr><td class="paramname">type</td><td>度量项的类型（如计数器、仪表等）。 </td></tr>
    <tr><td class="paramname">init</td><td>度量项的初始值。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>成功时返回 0；如果度量项已存在且类型或帮助信息不匹配，返回 -1；如果内存分配失败，也返回 -1；如果度量项已存在但匹配成功，返回 1。 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_adcf9c20994247a75a0e325bc9a028ac2_cgraph.png" border="0" usemap="#ametrics_8c_adcf9c20994247a75a0e325bc9a028ac2_cgraph" alt=""/></div>
<map name="ametrics_8c_adcf9c20994247a75a0e325bc9a028ac2_cgraph" id="ametrics_8c_adcf9c20994247a75a0e325bc9a028ac2_cgraph">
<area shape="rect" title="向度量项列表中添加一个新的度量项。" alt="" coords="5,5,184,32"/>
<area shape="rect" href="rolling__counter_8h.html#a9273294344137dd0bc9830beecf985b9" title=" " alt="" coords="232,5,416,32"/>
</map>
</div>

</div>
</div>
<a id="a323426323d6d97309beebbb1bb1d6b56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323426323d6d97309beebbb1bb1d6b56">&#9670;&nbsp;</a></span>neu_metrics_add_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void neu_metrics_add_node </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="define_8h.html#a6fc06a17a84fda2b3f03dae071c32f32">neu_adapter_t</a> *&#160;</td>
          <td class="paramname"><em>adapter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>添加一个节点度量到全局度量集合中。 </p>
<p>此函数用于将指定适配器的节点度量信息添加到全局度量集合中。 在进行添加操作时，会使用写锁保护全局度量集合以确保线程安全。</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adapter</td><td>指向适配器对象的常量指针，包含要添加的节点度量信息。 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3257ba6ef24aa42bb32e7b46a292fa60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3257ba6ef24aa42bb32e7b46a292fa60">&#9670;&nbsp;</a></span>neu_metrics_del_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void neu_metrics_del_node </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="define_8h.html#a6fc06a17a84fda2b3f03dae071c32f32">neu_adapter_t</a> *&#160;</td>
          <td class="paramname"><em>adapter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4c020752c4c581373d5496be25323913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c020752c4c581373d5496be25323913">&#9670;&nbsp;</a></span>neu_metrics_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void neu_metrics_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>初始化度量指标。 </p>
<p>此函数负责初始化全局度量指标系统，包括设置启动时间戳、获取操作系统信息和总内存大小。 使用写锁保护对全局变量的访问，以确保线程安全。</p>
<p>在首次调用时，此函数会：</p><ul>
<li>设置启动时间戳（<code>g_start_ts_</code>）为当前时间（毫秒）。</li>
<li>获取并记录操作系统信息。</li>
<li>获取并记录系统的总内存大小（字节）到 <code>g_metrics_.mem_total_bytes</code>。</li>
</ul>
<p>后续调用不会重复执行上述初始化步骤，因为它们依赖于 <code>g_start_ts_</code> 是否已设置。 </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a4c020752c4c581373d5496be25323913_cgraph.png" border="0" usemap="#ametrics_8c_a4c020752c4c581373d5496be25323913_cgraph" alt=""/></div>
<map name="ametrics_8c_a4c020752c4c581373d5496be25323913_cgraph" id="ametrics_8c_a4c020752c4c581373d5496be25323913_cgraph">
<area shape="rect" title="初始化度量指标。" alt="" coords="5,56,136,83"/>
<area shape="rect" href="metrics_8c.html#a85c7f967bf06b5296bb6847078c4e141" title="查找并填充操作系统的相关信息到全局度量结构体中。" alt="" coords="191,5,291,32"/>
<area shape="rect" href="metrics_8c.html#ac8ded23fbb5452e9519b762b8af7f500" title=" " alt="" coords="184,56,299,83"/>
<area shape="rect" href="time_8h.html#a5d0ec4465fba784c9104077b4ca178f9" title=" " alt="" coords="186,107,297,133"/>
<area shape="rect" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e" title="解析并返回指定列的内存信息（以字节为单位）。" alt="" coords="347,56,509,83"/>
</map>
</div>

</div>
</div>
<a id="ad747eaf22f78ec7829e8b02258ab47aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad747eaf22f78ec7829e8b02258ab47aa">&#9670;&nbsp;</a></span>neu_metrics_register_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int neu_metrics_register_entry </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>help</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="metrics_8h.html#af02d32b6106f4771a8ade0c0fe3a2fc6">neu_metric_type_e</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>注册一个新的度量项。 </p>
<p>此函数用于注册一个新的度量项，并将其添加到全局注册度量列表中。如果度量项已存在，则增加其引用计数。 在操作过程中使用读写锁 <code>g_metrics_mtx_</code> 以确保线程安全。</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>度量项的名称。 </td></tr>
    <tr><td class="paramname">help</td><td>度量项的帮助信息或描述。 </td></tr>
    <tr><td class="paramname">type</td><td>度量项的类型（如计数器、仪表等）。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>成功时返回 0；如果发生错误（如添加失败），则返回 -1。 </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_ad747eaf22f78ec7829e8b02258ab47aa_cgraph.png" border="0" usemap="#ametrics_8c_ad747eaf22f78ec7829e8b02258ab47aa_cgraph" alt=""/></div>
<map name="ametrics_8c_ad747eaf22f78ec7829e8b02258ab47aa_cgraph" id="ametrics_8c_ad747eaf22f78ec7829e8b02258ab47aa_cgraph">
<area shape="rect" title="注册一个新的度量项。" alt="" coords="5,5,164,47"/>
<area shape="rect" href="metrics_8c.html#adcf9c20994247a75a0e325bc9a028ac2" title="向度量项列表中添加一个新的度量项。" alt="" coords="212,13,391,39"/>
<area shape="rect" href="rolling__counter_8h.html#a9273294344137dd0bc9830beecf985b9" title=" " alt="" coords="439,13,623,39"/>
</map>
</div>

</div>
</div>
<a id="a1df8cd187485739c3e3749919b5e1c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1df8cd187485739c3e3749919b5e1c44">&#9670;&nbsp;</a></span>neu_metrics_unregister_entry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void neu_metrics_unregister_entry </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a1df8cd187485739c3e3749919b5e1c44_cgraph.png" border="0" usemap="#ametrics_8c_a1df8cd187485739c3e3749919b5e1c44_cgraph" alt=""/></div>
<map name="ametrics_8c_a1df8cd187485739c3e3749919b5e1c44_cgraph" id="ametrics_8c_a1df8cd187485739c3e3749919b5e1c44_cgraph">
<area shape="rect" title=" " alt="" coords="5,35,180,76"/>
<area shape="rect" href="metrics_8c.html#a0c540b36a3c5c2bf45c461f101da5b65" title=" " alt="" coords="228,35,372,76"/>
<area shape="rect" href="metrics_8h.html#ae8a16be19a1963e118da7e68d13dfce3" title=" " alt="" coords="420,42,589,69"/>
<area shape="rect" href="metrics_8h.html#a8c32e9cb6e10201d020fdda7c24e63ce" title=" " alt="" coords="654,5,803,47"/>
<area shape="rect" href="rolling__counter_8h.html#a2adea9d49fb3e851d1b2461c5cb4a8dc" title=" " alt="" coords="637,71,820,98"/>
</map>
</div>

</div>
</div>
<a id="a37844554c13adda3a08677c12fe54247"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37844554c13adda3a08677c12fe54247">&#9670;&nbsp;</a></span>neu_metrics_visist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void neu_metrics_visist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="metrics_8h.html#a1a62084e12635a3ec0a01c677cc31d8c">neu_metrics_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="metrics_8c_a37844554c13adda3a08677c12fe54247_cgraph.png" border="0" usemap="#ametrics_8c_a37844554c13adda3a08677c12fe54247_cgraph" alt=""/></div>
<map name="ametrics_8c_a37844554c13adda3a08677c12fe54247_cgraph" id="ametrics_8c_a37844554c13adda3a08677c12fe54247_cgraph">
<area shape="rect" title=" " alt="" coords="5,157,149,184"/>
<area shape="rect" href="metrics_8c.html#ad51796c6ddd8172def2fee4de30f572d" title=" " alt="" coords="235,5,326,32"/>
<area shape="rect" href="metrics_8c.html#afd8ce4f99ee60dc46c91cf3d44269fb7" title=" " alt="" coords="233,56,328,83"/>
<area shape="rect" href="metrics_8c.html#a53393c854671925690d6fe4d89acad80" title=" " alt="" coords="215,107,346,133"/>
<area shape="rect" href="metrics_8c.html#a059d31a7f36e85487e99052a8b2bec34" title=" " alt="" coords="219,157,342,184"/>
<area shape="rect" href="plugin_8h.html#aeed2304733a2ba56247be8f138abcdb3" title=" " alt="" coords="201,209,361,250"/>
<area shape="rect" href="time_8h.html#a5d0ec4465fba784c9104077b4ca178f9" title=" " alt="" coords="225,275,336,301"/>
<area shape="rect" href="metrics_8c.html#a299a5846c32a932b30ac9d8d840285c0" title=" " alt="" coords="197,325,364,352"/>
<area shape="rect" href="metrics_8c.html#a4b409720ca506204f9f20a9f59810f1a" title=" " alt="" coords="444,56,547,83"/>
<area shape="rect" href="metrics_8c.html#a9a143b570f78c1dbd05dc38a1cc25674" title=" " alt="" coords="412,107,579,133"/>
<area shape="rect" href="metrics_8c.html#a1c0c07b91859d028e459b964fdd8f13e" title="解析并返回指定列的内存信息（以字节为单位）。" alt="" coords="414,157,577,184"/>
</map>
</div>

</div>
</div>
<a id="a299a5846c32a932b30ac9d8d840285c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a299a5846c32a932b30ac9d8d840285c0">&#9670;&nbsp;</a></span>neuron_memory_used()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t neuron_memory_used </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1c0c07b91859d028e459b964fdd8f13e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c0c07b91859d028e459b964fdd8f13e">&#9670;&nbsp;</a></span>parse_memory_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t parse_memory_fields </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>解析并返回指定列的内存信息（以字节为单位）。 </p>
<p>此函数通过执行 shell 命令 &lsquo;free -b | awk 'NR==2 {print $&lt;col&gt;}&rsquo;` 来获取系统内存信息的特定列， 并将其转换为字节大小返回。如果命令执行失败或没有输出，则会记录错误日志并返回 0。</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">col</td><td>要解析的列号（从1开始），例如在 <code>free</code> 命令输出中，总内存位于第2列，已用内存位于第3列等。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>返回指定列的内存大小（以字节为单位）。如果命令执行失败或无输出，则返回 0。 </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afc4412e5042f07177238726097fcde78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4412e5042f07177238726097fcde78">&#9670;&nbsp;</a></span>g_metrics_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structneu__metrics__t.html">neu_metrics_t</a> g_metrics_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>全局度量对象，用于存储和管理所有适配器和节点的度量信息。 </p>
<p>此全局变量包含整个应用程序中所有适配器和节点的度量信息。 </p>

</div>
</div>
<a id="a962b2176b4975ae931cd702e2cbe90d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962b2176b4975ae931cd702e2cbe90d1">&#9670;&nbsp;</a></span>g_metrics_mtx_</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_rwlock_t g_metrics_mtx_ = PTHREAD_RWLOCK_INITIALIZER</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>全局读写锁，用于保护度量集合的并发访问。 </p>
<p>NEURON IIoT System for Industry 4.0 Copyright (C) 2020-2022 EMQ Technologies Co., Ltd All rights reserved.</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
<p>此读写锁用于确保在多线程环境中对全局度量集合进行安全的读写操作。 通过使用读写锁，可以允许多个读者同时访问数据，但写者需要独占访问权限。 </p>

</div>
</div>
<a id="aa831bfee9fef2d4d352f10e84304f67f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa831bfee9fef2d4d352f10e84304f67f">&#9670;&nbsp;</a></span>g_start_ts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t g_start_ts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>全局起始时间戳，记录程序或特定操作的开始时间。 </p>
<p>此变量用于存储某个关键点的时间戳（通常以毫秒为单位）， 例如程序启动时间或某项操作的开始时间。它常被用于计算经过的时间或进行性能监控。</p>
<dl class="section note"><dt>Note</dt><dd>静态全局变量的作用域仅限于声明它的文件 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
